<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Archetype - Painel de Projetos</title>

    <link rel="stylesheet" href="src/styles/style.css">
    <link rel="stylesheet" href="src/styles/projects.css">

    <style>
        .carousel-wrapper { display: flex; align-items: center; gap: 10px; }
        .arrow-btn.disabled { opacity: .3; pointer-events: none; }
        .empty-msg { color: #aaa; padding: 20px; font-size: 1.1rem; }
        .hidden { display: none !important; }
        .arrow-btn:hover{
            box-shadow: none;
        }
    </style>
</head>

<body>

<header>
    <div class="left corner">
        <a href="projects.html"><img src="src/components/images/logo.png" style="height: 70px; cursor: pointer;"></a>
    </div>
    <div class="right corner">
        <button class="nav-bar-button" id="btnContact">Contate-nos</button>
        <a href=""><img src="src/components/images/user.png" style="height: 80px;"></a>
    </div>
</header>

<main>

    <div class="dashboard-header">
        <h1 class="page-title">Meus projetos</h1>
        <div class="dashboard-actions">
            <button class="call-action-button" onclick="window.location.href='create-project.html'" style="border: 0; height: 50px; font-size: medium; gap: 10px;">
                Novo Projeto <img src="src/components/images/add-icon.png">
            </button>

            <div class="search-box">
                <input type="text" id="searchInput" class="search-inp" placeholder="Buscar projeto...">
            </div>
        </div>
    </div>

    <!-- ===================== RECENTES ===================== -->
    <section>
        <h2>Recentes</h2>

        <div class="empty-msg hidden" id="msgRecentes"></div>

        <div class="carousel-wrapper">
            <button class="arrow-btn" id="btnLeftRecentes">
                <img src="src/components/images/lft-arrow.png" class="arrow-img">
            </button>

            <div class="cards-scroll" id="scrollRecentes"></div>

            <button class="arrow-btn" id="btnRightRecentes">
                <img src="src/components/images/rgt-arrow.png" class="arrow-img">
            </button>
        </div>
    </section>

    <!-- ===================== MEUS PROJETOS ===================== -->
    <section>
        <h2>Meus Projetos</h2>

        <div class="empty-msg hidden" id="msgMeus"></div>

        <div class="cards-grid" id="gridMeus"></div>
    </section>

    <!-- ===================== COMPARTILHADOS ===================== -->
    <section>
        <h2>Compartilhados Comigo</h2>

        <div class="empty-msg hidden" id="msgCompartilhados"></div>

        <div class="cards-grid" id="gridCompartilhados"></div>
    </section>

</main>

<!-- ============ MODAL DE CONTATO ============ -->
<div id="contactModal" class="modal-overlay">
    <div class="modal-box">
        <div class="modal-logo-area">
            <img src="src/components/images/logo.png" class="modal-logo-img">
            <span class="modal-logo-text">ARCHETYPE</span>
        </div>

        <h2 class="modal-title">Contate-nos</h2>

        <form class="contact-form">
            <label for="email">Seu email:</label>
            <input type="email" id="email">

            <label for="subject">Assunto:</label>
            <input type="text" id="subject">

            <label for="message">Mensagem:</label>
            <textarea id="message" rows="4"></textarea>

            <button type="submit" class="btn-send">Enviar mensagem</button>
        </form>
    </div>
</div>
<footer style="bottom: 0px;">
        <div class="left corner">
            <img src="src/components/images/logotipovertical.png" alt="logotipo vertical" style="width: 300px;">
            <p>© 2025 Archetype. Todos os direitos reservados.</p>
        </div>
        <hr>
        <div class="right corner">
            <p>Outros Links:</p>
            <li><a href="adicione o link">Contato</a></li>
            <li><a href="adicione o link">Política de Privacidade</a></li>
            <li style="margin-bottom: 50px;"><a href="adicione o link">Termos de Uso</a></li>
            <div style="display: flex; gap: 20px;">
                <a href="adicione o link"><img src="src/components/images/Mask group.png" alt="email icon"></a>
                <a href="adicione o link"><img src="src/components/images/Mask group-1.png" alt="instagram icon"></a>
                <a href="adicione o link"><img src="src/components/images/Mask group-2.png" alt="x icon"></a>
            </div>
        </div>
    </footer>

<!-- ============ MODAL DE INFORMAÇÕES DA CONTA ============ -->
<div id="accountModal" class="modal-overlay-account">

    <div class="account-modal-box">

        <!-- Botão de fechar -->
        <img src="src/components/images/close.png" class="close-account-modal" id="closeAccountModal">

        <div class="account-content">

            <!-- LADO ESQUERDO -->
            <div class="left-area">

                <img src="src/components/images/user.png" class="profile-photo">

                <a href="#" class="change-photo">Alterar Foto</a>
                <a href="#" class="change-password">Alterar Senha</a>
                <a href="#" class="delete-account">Excluir Conta</a>

            </div>

            <!-- LADO DIREITO -->
            <div class="right-area">

                <!-- Nome -->
                <label class="field-label">Nome</label>
                <div class="field-box">
                    <input type="text" value="Joao">
                    <img class="edit-icon" src="fi-rr-pencil.svg" alt= "Ícone">

                </div>

                <!-- Email -->
                <label class="field-label">Email</label>
                <div class="field-box">
                    <input type="email" value="joao@gmail.com">
                   <img class="edit-icon" src="fi-rr-pencil.svg" alt= "Ícone">

                </div>

                <!-- Plano -->
                <label class="field-label">Seu Plano</label>
                <div class="field-box">
                    <input type="text" value="Premium" disabled>
                    <i class="fi fi-rr-pencil" style="opacity: 0.25; cursor: not-allowed;"></i>
                </div>

                <!-- CONFIG SYSTEM -->
                <div class="system-config">
                    <h3>⚙ Configurações de Sistema</h3>

                    <div class="config-row">

                        <div class="config-item">
                            <label>Idioma</label>
                            <select>
                                <option>Português (Brasil)</option>
                                <option>Inglês (EUA)</option>
                            </select>
                        </div>

                        <div class="config-item">
                            <label>Tema</label>
                            <select>
                                <option>Tema do Sistema</option>
                                <option>Claro</option>
                                <option>Escuro</option>
                            </select>
                        </div>

                    </div>
                </div>

                <button class="btn-apply">Aplicar</button>

            </div>
        </div>

    </div>

</div>


<script>

/* ============================================
                DADOS DOS PROJETOS
=============================================== */
const projetos = {
    recentes: [
        { nome: "Rascunho de Campanha de Marketing", tempo: "Há 1 dia", collab: 3 },
        { nome: "Mapa da Campanha", tempo: "Há 2 dias", collab: 1 },
        { nome: "Projeto X", tempo: "Há 3 dias", collab: 2 },
        { nome: "Arquétipos Iniciais", tempo: "Há 1 semana", collab: 0 },
        { nome: "Sistema Teste", tempo: "Há 2 semanas", collab: 1 }
    ],
    meus: [
        { nome: "Archetype", tempo: "Há 1 dia", collab: 2 },
        { nome: "Propagandas Produto 1", tempo: "Há 3 dias", collab: 0 },
        { nome: "Projeto z", tempo: "Há 1 semana", collab: 4 }
    ],
    compartilhados: [
        { nome: "Projeto da Equipe", tempo: "Há 2 dias", collab: 3 },
        { nome: "Anotações Gerais", tempo: "Há 5 dias", collab: 1 }
    ]
};

/* ============================================
            FUNÇÃO DE CRIAÇÃO DE CARD
=============================================== */
function criarCard(p) {
    return `
        <a href="personas.html" style="text-decoration: none;">
            <div class="card" style="max-height: 212px; overflow: hidden;">
                <div class="card-top"><div class="mockup"></div></div>
                <div class="card-bot">
                    <div class="card-info">
                        <i class="fa-solid fa-pen-nib"></i>
                        <div class="txt">
                            <div style="max-width: 240px">
                                <h3 style="overflow: hidden; text-overflow : ellipsis;white-space: nowrap;display: block;">${p.nome}</h3>
                            </div>
                            <p>${p.tempo}</p>
                        </div>
                    </div>
                    <div class="collab">
                        <i class="fa-solid fa-circle-user"></i>
                        ${p.collab > 1 ? `<span>+${p.collab}</span>` : ""}
                    </div>
                </div>
            </div>
        </a>`;
}

/* ============================================
            RENDERIZAÇÃO DAS TELAS
=============================================== */
function listarProjetos() {
    document.getElementById("scrollRecentes").innerHTML =
        projetos.recentes.map(criarCard).join("");

    document.getElementById("gridMeus").innerHTML =
        projetos.meus.map(criarCard).join("");

    document.getElementById("gridCompartilhados").innerHTML =
        projetos.compartilhados.map(criarCard).join("");

    atualizarCarrossel("scrollRecentes", "btnLeftRecentes", "btnRightRecentes");
}
listarProjetos();

/* ============================================
                BUSCA DINÂMICA
=============================================== */
const input = document.getElementById("searchInput");

input.addEventListener("input", () => {
    const texto = input.value.trim().toLowerCase();
    filtrarProjetos(texto);
});

function filtrarProjetos(texto) {
    filtrarCategoria("recentes", "scrollRecentes", "msgRecentes", texto);
    filtrarCategoria("meus", "gridMeus", "msgMeus", texto);
    filtrarCategoria("compartilhados", "gridCompartilhados", "msgCompartilhados", texto);

    // atualizar carrossel após re-render
    atualizarCarrossel("scrollRecentes", "btnLeftRecentes", "btnRightRecentes");
}

function filtrarCategoria(nomeCategoria, idContainer, idMsg, termo) {
    const container = document.getElementById(idContainer);
    const msg = document.getElementById(idMsg);

    // filtra diretamente os dados originais
    const filtrados = projetos[nomeCategoria].filter(p =>
        p.nome.toLowerCase().includes(termo)
    );

    // renderiza somente os filtrados
    container.innerHTML = filtrados.map(criarCard).join("");

    // mensagem caso vazio
    if (filtrados.length === 0) {
        msg.innerText = `Não há projetos em ${nomeCategoria} com o termo "${termo}".`;
        msg.classList.remove("hidden");
    } else {
        msg.classList.add("hidden");
    }

    // reset scroll para o início
    if (container.classList.contains("cards-scroll")) {
        container.scrollLeft = 0;
    }
}




/* ============================================
                CARROSSEL
=============================================== */
function atualizarCarrossel(idScroll, idLeft, idRight) {
    const sc = document.getElementById(idScroll);
    const btnL = document.getElementById(idLeft);
    const btnR = document.getElementById(idRight);

    const maxScroll = sc.scrollWidth - sc.clientWidth;

    btnL.classList.toggle("disabled", sc.scrollLeft <= 0);
    btnR.classList.toggle("disabled", sc.scrollLeft >= maxScroll);

    btnL.onclick = () => { sc.scrollBy({ left: -320, behavior: "smooth" }); };
    btnR.onclick = () => { sc.scrollBy({ left: 320, behavior: "smooth" }); };

    sc.onscroll = () => {
        btnL.classList.toggle("disabled", sc.scrollLeft <= 0);
        btnR.classList.toggle("disabled", sc.scrollLeft >= sc.scrollWidth - sc.clientWidth);
    };
}

/* ============================================
            MODAL + FORM SIMPLIFICADO
=============================================== */
const modal = document.getElementById("contactModal");
document.getElementById("btnContact").onclick = () => modal.style.display = "flex";
modal.onclick = e => { if (e.target === modal) modal.style.display = "none"; };

document.querySelector(".contact-form").onsubmit = e => {
    e.preventDefault();
    alert("Mensagem enviada!");
    modal.style.display = "none";
};

// ===================== MODAL DA CONTA =====================

const accountModal = document.getElementById("accountModal");
const userIconNavbar = document.querySelector("header .right.corner a img");
const closeAccount = document.getElementById("closeAccountModal");

// abrir modal ao clicar no ícone do usuário
userIconNavbar.addEventListener("click", (e) => {
    e.preventDefault();
    accountModal.style.display = "flex";
});

// fechar ao clicar no X
closeAccount.onclick = () => {
    accountModal.style.display = "none";
};

// fechar clicando no fundo escuro
accountModal.onclick = (e) => {
    if (e.target === accountModal) {
        accountModal.style.display = "none";
    }
};

</script>

</body>
</html>
