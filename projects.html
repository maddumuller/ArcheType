<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel de Projetos</title>
    
    <link rel="stylesheet" href="src/styles/projects.css">
    
    <link rel="stylesheet" href="src/styles/landing-styles.css">
    <link rel="stylesheet" href="src/styles/wave.css">
    <link rel="stylesheet" href="src/styles/parallax.css">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>

    <header class="main-header">
        <div class="h-left">
            <img src="src/components/images/logo.png" alt="Logo">
            <a href="projects.html" class="nav-pill">Projetos</a>
        </div>
        <div class="h-right">
            <button class="btn-contact" id="btnContact">Contate-nos</button>
            <i class="fa-solid fa-circle-user user-avatar"></i>
        </div>
    </header>

    <main>
        <div class="dashboard-header">
            <h1 class="page-title">Meus projetos</h1>
            <div class="dashboard-actions">
                <a href="criar-projeto.html" class="btn-new">Novo Projeto <i class="fa-solid fa-circle-plus"></i></a>
                <div class="search-box">
                    <input type="text" id="searchInput" class="search-inp" placeholder="Buscar projeto">
                    <button class="search-btn" onclick="buscar()"><i class="fa-solid fa-magnifying-glass"></i></button>
                </div>
            </div>
        </div>

        <section>
            <h2>Recentes</h2>
            <div class="carousel-wrapper">
                <button class="arrow-btn" id="btnLeft"><i class="fa-solid fa-chevron-left"></i></button>
                <div class="cards-scroll" id="scrollContainer">
                    
                    <div class="card">
                        <div class="card-top"><div class="mockup"></div></div>
                        <div class="card-bot">
                            <div class="card-info"><i class="fa-solid fa-pen-nib"></i><div class="txt"><h3>Projeto Exemplo 1</h3><p>Há 1 dia</p></div></div>
                            <div class="collab">
                                <i class="fa-solid fa-circle-user"></i><span>+3</span>
                                <div class="tooltip">
                                    <div class="t-row"><div class="t-avt">JS</div> João Silva</div>
                                    <div class="t-row"><div class="t-avt">MA</div> Maria A.</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-top"><div class="mockup"></div></div>
                        <div class="card-bot">
                            <div class="card-info"><i class="fa-solid fa-pen-nib"></i><div class="txt"><h3>Projeto Exemplo 2</h3><p>Há 2 dias</p></div></div>
                            <div class="collab"><i class="fa-solid fa-circle-user"></i></div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-top"><div class="mockup"></div></div>
                        <div class="card-bot">
                            <div class="card-info"><i class="fa-solid fa-pen-nib"></i><div class="txt"><h3>Projeto Exemplo 3</h3><p>Há 1 semana</p></div></div>
                            <div class="collab"><i class="fa-solid fa-circle-user"></i><span>+2</span></div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-top"><div class="mockup"></div></div>
                        <div class="card-bot">
                            <div class="card-info"><i class="fa-solid fa-pen-nib"></i><div class="txt"><h3>Projeto Antigo</h3><p>Há 1 mês</p></div></div>
                            <div class="collab"><i class="fa-solid fa-circle-user"></i></div>
                        </div>
                    </div>
                </div>
                <button class="arrow-btn" id="btnRight"><i class="fa-solid fa-chevron-right"></i></button>
            </div>
        </section>

        <section>
            <h2>Meus projetos</h2>
            <div class="cards-grid">
                <div class="card">
                    <div class="card-top"><div class="mockup"></div></div>
                    <div class="card-bot">
                        <div class="card-info"><i class="fa-solid fa-pen-nib"></i><div class="txt"><h3>Projeto Exemplo 2</h3><p>Há 2 dias</p></div></div>
                        <div class="collab"><i class="fa-solid fa-circle-user"></i></div>
                    </div>
                </div>
            </div>
        </section>

        <section>
            <h2>Compartilhados comigo</h2>
            <div class="cards-grid">
                <div class="card">
                    <div class="card-top"><div class="mockup"></div></div>
                    <div class="card-bot">
                        <div class="card-info"><i class="fa-solid fa-pen-nib"></i><div class="txt"><h3>Projeto Exemplo 1</h3><p>Há 1 dia</p></div></div>
                        <div class="collab"><i class="fa-solid fa-circle-user"></i><span>+3</span>
                            <div class="tooltip"><div class="t-row"><div class="t-avt">G</div> Gerente</div></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <div id="contactModal" class="modal-overlay">
        <div class="modal-box">
            <div class="modal-logo-area">
                <img src="src/components/images/logo.png" alt="Archetype Logo" class="modal-logo-img">
                <span class="modal-logo-text">ARCHETYPE</span>
            </div>

            <h2 class="modal-title">Contate-nos</h2>

            <form class="contact-form">
                <label for="email">Seu email:</label>
                <input type="email" id="email" placeholder="Insira seu email">

                <label for="subject">Assunto:</label>
                <input type="text" id="subject" placeholder="Pagamentos, suporte, etc...">

                <label for="message">Mensagem:</label>
                <textarea id="message" rows="4" placeholder="Descreva sua dúvida ou problema"></textarea>

                <button type="submit" class="btn-send">Enviar mensagem</button>
            </form>
        </div>
    </div>

    <script>
        // --- 1. Lógica do Carrossel ---
        const container = document.getElementById('scrollContainer');
        const btnL = document.getElementById('btnLeft');
        const btnR = document.getElementById('btnRight');
        
        if (container && btnL && btnR) {
            const move = (dir) => container.scrollBy({ left: dir === 'r' ? 320 : -320, behavior: 'smooth' });
            btnR.onclick = () => move('r');
            btnL.onclick = () => move('l');
            container.onscroll = () => btnL.style.display = container.scrollLeft > 10 ? 'block' : 'none';
        }

        // --- 2. Lógica da Busca ---
        const inp = document.getElementById('searchInput');
        function buscar() {
            const val = inp.value.toLowerCase().trim();
            if(!val) return alert("Digite um nome.");
            let found = false;
            document.querySelectorAll('.txt h3').forEach(h3 => {
                const card = h3.closest('.card');
                card.style.border = "none";
                if(h3.innerText.toLowerCase().includes(val)) {
                    card.style.border = "2px solid red";
                    card.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    found = true;
                }
            });
            if(!found) alert("Projeto não encontrado.");
        }
        if(inp) inp.addEventListener('keypress', (e) => { if(e.key === 'Enter') buscar() });

        // --- 3. Lógica do Modal e Validação ---
        const contactModal = document.getElementById('contactModal');
        const btnContact = document.getElementById('btnContact');
        
        // Elementos do Formulário
        const contactForm = document.querySelector('.contact-form');
        const inputEmail = document.getElementById('email');
        const inputSubject = document.getElementById('subject');
        const inputMessage = document.getElementById('message');

        if (btnContact && contactModal) {
            // Abrir Modal
            btnContact.addEventListener('click', (e) => {
                e.preventDefault();
                contactModal.style.display = 'flex';
            });

            // Fechar Modal ao clicar fora
            contactModal.addEventListener('click', (e) => {
                if (e.target === contactModal) {
                    contactModal.style.display = 'none';
                    limparErros(); // Limpa os vermelhos se fechar sem enviar
                }
            });
        }

        // Função para limpar as bordas vermelhas
        function limparErros() {
            [inputEmail, inputSubject, inputMessage].forEach(campo => {
                campo.classList.remove('input-error');
            });
        }

        // --- VALIDAÇÃO DO ENVIO ---
        if (contactForm) {
            contactForm.addEventListener('submit', function(e) {
                e.preventDefault(); // Impede o envio real (recarregar página)
                
                let temErro = false;
                limparErros(); // Remove erros antigos antes de validar

                // Validação Campo E-mail
                if (!inputEmail.value.trim()) {
                    inputEmail.classList.add('input-error');
                    temErro = true;
                }

                // Validação Campo Assunto
                if (!inputSubject.value.trim()) {
                    inputSubject.classList.add('input-error');
                    temErro = true;
                }

                // Validação Campo Mensagem
                if (!inputMessage.value.trim()) {
                    inputMessage.classList.add('input-error');
                    temErro = true;
                }

                if (temErro) {
                    alert("Por favor, preencha todos os campos obrigatórios.");
                } else {
                    // SUCESSO!
                    alert("Mensagem enviada com sucesso. Nossa equipe entrará em contato o mais breve possível.");
                    contactForm.reset(); // Limpa o formulário
                    contactModal.style.display = 'none'; // Fecha o modal
                }
            });
        }
    </script>
</body>
</html>